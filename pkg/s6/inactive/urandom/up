#!/bin/execlineb -P

fdmove -c 2 1
foreground {
	cp /var/lib/seed /dev/urandom
}

backtick -n bytes { cat /proc/sys/kernel/random/poolsize }
importas -u -D "" bytes bytes
if -t {
	foreground {
		if { s6-test -z $bytes }
		define defbytes 4096
		umask 077
		dd if=/dev/urandom of=/var/lib/seed count=1 bs=$defbytes 
	}
	s6-true
}
umask 077
foreground { dd if=/dev/urandom of=/var/lib/seed count=1 bs=$bytes }
