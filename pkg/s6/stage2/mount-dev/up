# setup /dev
foreground {
    if { mkdir -p /dev/pts /dev/shm }
    s6-mount -t devpts -o nosuid,noexec,gid=5,mode=0620 devpts /dev/pts
    s6-mount -t tmpfs shm -o nosuid,nodev,noexec /dev/shm

    if -t { grep -Fq hugetlbfs /proc/filesystems }
    if -nt { mountpoint -q /dev/hugepages }
    if { mkdir -p /dev/hugepages }
    s6-mount -t hugetlbfs -o nosuid,nodev,noexec,noatime hugepages /dev/hugepages

    if { ln -s /proc/self/fd /dev/fd }
    if { ln -s /proc/kcore /dev/core }
    if { ln -s fd/0 /dev/stdin }
    if { ln -s fd/1 /dev/stdout }
    if { ln -s fd/2 /dev/stderr }
}
